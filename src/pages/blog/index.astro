---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import BlogPostCard from '../../components/BlogPostCard.astro';

const allPosts = await getCollection('blog');
const sortedPosts = allPosts
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<Layout
  title="Blog - Ross Starkey"
  description="Insights on aviation, entrepreneurship, building with AI, and lessons learned along the journey."
>
  <div class="max-w-7xl mx-auto px-6 py-16">
    <div class="mb-12">
      <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">Blog</h1>
      <p class="text-xl text-gray-400">
        Insights on aviation, entrepreneurship, and building in public.
      </p>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {sortedPosts.map((post) => (
        <BlogPostCard
          title={post.data.title}
          description={post.data.description}
          date={post.data.date.toISOString()}
          slug={post.slug}
        />
      ))}
    </div>

    {sortedPosts.length === 0 && (
      <div class="text-center py-12">
        <p class="text-gray-400 text-lg">No posts yet. Check back soon!</p>
      </div>
    )}
  </div>
</Layout>
